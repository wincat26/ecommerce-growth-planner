<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>電商增長規劃師</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #5B73FF;
            --primary-light: #7B8CFF;
            --secondary: #4C5BDF;
            --gray-50: #F8FAFC;
            --gray-100: #F1F5F9;
            --gray-200: #E2E8F0;
            --gray-300: #CBD5E1;
            --gray-400: #94A3B8;
            --gray-500: #64748B;
            --gray-600: #475569;
            --gray-700: #334155;
            --gray-800: #1E293B;
            --gray-900: #0F172A;
        }
        
        body {
            font-family: 'Poppins', 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #F8FAFC 0%, #E2E8F0 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--gray-100);
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .card:hover {
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            transform: translateY(-2px);
        }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 3rem;
            gap: 1rem;
        }
        
        .step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.3s ease;
        }
        
        .step.active {
            background: var(--primary);
            color: white;
        }
        
        .step.completed {
            background: #10B981;
            color: white;
        }
        
        .step.inactive {
            background: var(--gray-200);
            color: var(--gray-500);
        }
        
        .step-content {
            display: none;
        }
        
        .step-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            font-weight: 500;
            color: var(--gray-700);
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }
        
        .form-input {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 2px solid var(--gray-200);
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.2s ease;
            background: white;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(91, 115, 255, 0.1);
        }
        
        .btn {
            padding: 0.875rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.2s ease;
            cursor: pointer;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-light);
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background: white;
            color: var(--gray-700);
            border: 2px solid var(--gray-200);
        }
        
        .btn-secondary:hover {
            background: var(--gray-50);
            border-color: var(--gray-300);
        }
        
        .metric-card {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            border: 1px solid var(--gray-100);
            transition: all 0.2s ease;
        }
        
        .metric-card:hover {
            border-color: var(--primary);
        }
        
        .metric-value {
            font-size: 1.875rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .metric-label {
            color: var(--gray-500);
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .campaign-card {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            border: 2px solid var(--gray-100);
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .campaign-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .campaign-card.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, #F0F4FF, #E6EDFF);
        }
        
        .badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .badge-traffic { background: #DBEAFE; color: #1E40AF; }
        .badge-conversion { background: #D1FAE5; color: #065F46; }
        .badge-aov { background: #FEF3C7; color: #92400E; }
        
        .grid { display: grid; gap: 1rem; }
        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-4 { grid-template-columns: repeat(4, 1fr); }
        
        @media (max-width: 768px) {
            .grid-2, .grid-3, .grid-4 { grid-template-columns: 1fr; }
            .card { padding: 1.5rem; }
            .container { padding: 1rem; }
        }
        
        .toast {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: white;
            border-radius: 12px;
            padding: 1rem 1.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border-left: 4px solid #10B981;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }
        
        .toast.show { transform: translateX(0); }
        
        .progress-ring {
            width: 120px;
            height: 120px;
            margin: 0 auto;
        }
        
        .progress-ring circle {
            fill: none;
            stroke-width: 8;
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        
        .progress-ring .bg {
            stroke: var(--gray-200);
        }
        
        .progress-ring .progress {
            stroke: var(--primary);
            stroke-dasharray: 314;
            stroke-dashoffset: 314;
            transition: stroke-dashoffset 0.5s ease;
        }
        
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Step Indicator -->
        <div class="step-indicator">
            <div class="step active" data-step="1">1</div>
            <div class="step inactive" data-step="2">2</div>
            <div class="step inactive" data-step="3">3</div>
            <div class="step inactive" data-step="4">4</div>
            <div class="step inactive" data-step="5">5</div>
        </div>

        <!-- Step 1: 品牌資訊 -->
        <div id="step-1" class="step-content active">
            <div class="card">
                <h2 style="font-size: 1.5rem; font-weight: 700; color: var(--gray-800); margin-bottom: 0.5rem;">品牌資訊設定</h2>
                <p style="color: var(--gray-500); margin-bottom: 2rem;">讓我們先了解您的品牌基本資訊</p>
                
                <div class="grid grid-2">
                    <div class="form-group">
                        <label class="form-label">品牌名稱</label>
                        <input type="text" id="brand-name" class="form-input" placeholder="例如：勤億蛋品">
                    </div>
                    <div class="form-group">
                        <label class="form-label">商品類別</label>
                        <select id="category" class="form-input">
                            <option>食品飲料</option>
                            <option>美妝保養</option>
                            <option>服飾配件</option>
                            <option>3C電子</option>
                            <option>居家生活</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">上傳歷史數據 (CSV)</label>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <button id="upload-btn" class="btn btn-secondary">
                            <i class="fas fa-upload"></i>選擇檔案
                        </button>
                        <span style="color: var(--gray-400); font-size: 0.875rem;">格式：日期,營收,流量,轉換率,客單價</span>
                    </div>
                    <input type="file" id="file-input" class="hidden" accept=".csv">
                </div>
                
                <div id="data-preview" class="hidden" style="margin-top: 2rem;">
                    <h3 style="font-weight: 600; margin-bottom: 1rem; color: var(--gray-700);">數據概覽</h3>
                    <div class="grid grid-4">
                        <div class="metric-card">
                            <div id="total-revenue" class="metric-value">-</div>
                            <div class="metric-label">總營收</div>
                        </div>
                        <div class="metric-card">
                            <div id="avg-traffic" class="metric-value">-</div>
                            <div class="metric-label">平均流量</div>
                        </div>
                        <div class="metric-card">
                            <div id="avg-cvr" class="metric-value">-</div>
                            <div class="metric-label">轉換率</div>
                        </div>
                        <div class="metric-card">
                            <div id="avg-aov" class="metric-value">-</div>
                            <div class="metric-label">客單價</div>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: right; margin-top: 2rem;">
                    <button id="next-1" class="btn btn-primary">
                        下一步 <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 2: 目標設定 -->
        <div id="step-2" class="step-content">
            <div class="card">
                <h2 style="font-size: 1.5rem; font-weight: 700; color: var(--gray-800); margin-bottom: 0.5rem;">目標設定</h2>
                <p style="color: var(--gray-500); margin-bottom: 2rem;">設定您的成長目標</p>
                
                <div class="grid grid-2">
                    <div class="form-group">
                        <label class="form-label">目標月份</label>
                        <input type="month" id="target-month" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">成長策略</label>
                        <select id="growth-strategy" class="form-input">
                            <option value="conservative">保守成長 (+15%)</option>
                            <option value="moderate" selected>穩健成長 (+30%)</option>
                            <option value="aggressive">積極成長 (+50%)</option>
                        </select>
                    </div>
                </div>
                
                <div class="grid grid-4">
                    <div class="form-group">
                        <label class="form-label">目標營收</label>
                        <input type="number" id="target-revenue" class="form-input" placeholder="1,000,000">
                    </div>
                    <div class="form-group">
                        <label class="form-label">目標流量</label>
                        <input type="number" id="target-traffic" class="form-input" placeholder="自動計算">
                    </div>
                    <div class="form-group">
                        <label class="form-label">目標轉換率 (%)</label>
                        <input type="number" id="target-cvr" class="form-input" placeholder="自動計算" step="0.1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">目標客單價</label>
                        <input type="number" id="target-aov" class="form-input" placeholder="自動計算">
                    </div>
                </div>
                
                <div style="display: flex; justify-content: space-between; margin-top: 2rem;">
                    <button id="back-2" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> 上一步
                    </button>
                    <button id="next-2" class="btn btn-primary">
                        下一步 <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 3: 缺口分析 -->
        <div id="step-3" class="step-content">
            <div class="card">
                <h2 style="font-size: 1.5rem; font-weight: 700; color: var(--gray-800); margin-bottom: 0.5rem;">缺口分析</h2>
                <p style="color: var(--gray-500); margin-bottom: 2rem;">分析目標與現況的差距</p>
                
                <div class="grid grid-3">
                    <div class="metric-card">
                        <div id="traffic-gap" class="metric-value" style="color: #3B82F6;">+0</div>
                        <div class="metric-label">流量缺口</div>
                    </div>
                    <div class="metric-card">
                        <div id="cvr-gap" class="metric-value" style="color: #10B981;">+0%</div>
                        <div class="metric-label">轉換率缺口</div>
                    </div>
                    <div class="metric-card">
                        <div id="aov-gap" class="metric-value" style="color: #F59E0B;">+$0</div>
                        <div class="metric-label">客單價缺口</div>
                    </div>
                </div>
                
                <div style="text-align: center; margin: 2rem 0;">
                    <div class="progress-ring">
                        <svg width="120" height="120">
                            <circle class="bg" cx="60" cy="60" r="50"></circle>
                            <circle id="progress-circle" class="progress" cx="60" cy="60" r="50"></circle>
                        </svg>
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-weight: 700; color: var(--primary);">
                            <div id="progress-percent" style="font-size: 1.5rem;">0%</div>
                            <div style="font-size: 0.75rem; color: var(--gray-500);">目標達成度</div>
                        </div>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: space-between; margin-top: 2rem;">
                    <button id="back-3" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> 上一步
                    </button>
                    <button id="next-3" class="btn btn-primary">
                        下一步 <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 4: 活動規劃 -->
        <div id="step-4" class="step-content">
            <div class="card">
                <h2 style="font-size: 1.5rem; font-weight: 700; color: var(--gray-800); margin-bottom: 0.5rem;">活動規劃</h2>
                <p style="color: var(--gray-500); margin-bottom: 2rem;">選擇適合的活動方案</p>
                
                <div style="margin-bottom: 2rem;">
                    <button id="generate-campaigns" class="btn btn-primary">
                        <i class="fas fa-magic"></i> 生成活動方案
                    </button>
                </div>
                
                <div id="campaigns-container" class="grid grid-2">
                    <!-- 活動卡片將在這裡生成 -->
                </div>
                
                <div style="display: flex; justify-content: space-between; margin-top: 2rem;">
                    <button id="back-4" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> 上一步
                    </button>
                    <button id="next-4" class="btn btn-primary">
                        下一步 <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 5: 完成 -->
        <div id="step-5" class="step-content">
            <div class="card" style="text-align: center;">
                <div style="font-size: 3rem; color: var(--primary); margin-bottom: 1rem;">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2 style="font-size: 1.5rem; font-weight: 700; color: var(--gray-800); margin-bottom: 0.5rem;">規劃完成！</h2>
                <p style="color: var(--gray-500); margin-bottom: 2rem;">您的電商增長計畫已經準備就緒</p>
                
                <div style="display: flex; justify-content: center; gap: 1rem;">
                    <button id="export-plan" class="btn btn-primary">
                        <i class="fas fa-download"></i> 匯出計畫
                    </button>
                    <button id="restart" class="btn btn-secondary">
                        <i class="fas fa-redo"></i> 重新開始
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast">
        <div style="display: flex; align-items: center;">
            <i class="fas fa-check-circle" style="color: #10B981; margin-right: 0.5rem;"></i>
            <span id="toast-message"></span>
        </div>
    </div>

    <script>
        class EcommercePlanner {
            constructor() {
                this.currentStep = 1;
                this.data = { historical: [], targets: {}, gaps: {} };
                this.init();
            }

            init() {
                this.bindEvents();
                this.setDefaultMonth();
            }

            bindEvents() {
                document.getElementById('upload-btn').onclick = () => document.getElementById('file-input').click();
                document.getElementById('file-input').onchange = (e) => this.handleFileUpload(e);
                
                ['next-1', 'next-2', 'next-3', 'next-4'].forEach(id => {
                    document.getElementById(id).onclick = () => this.nextStep();
                });
                
                ['back-2', 'back-3', 'back-4'].forEach(id => {
                    document.getElementById(id).onclick = () => this.prevStep();
                });
                
                document.getElementById('growth-strategy').onchange = () => this.calculateTargets();
                document.getElementById('generate-campaigns').onclick = () => this.generateCampaigns();
                document.getElementById('export-plan').onclick = () => this.exportPlan();
                document.getElementById('restart').onclick = () => location.reload();
            }

            setDefaultMonth() {
                const next = new Date();
                next.setMonth(next.getMonth() + 1);
                document.getElementById('target-month').value = next.toISOString().slice(0, 7);
            }

            handleFileUpload(event) {
                const file = event.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const csv = e.target.result;
                        const lines = csv.split('\n').filter(line => line.trim());
                        
                        const data = lines.slice(1).map(line => {
                            const [date, revenue, traffic, cvr, aov] = line.split(',');
                            return {
                                date: new Date(date.trim()),
                                revenue: parseFloat(revenue) || 0,
                                traffic: parseFloat(traffic) || 0,
                                cvr: parseFloat(cvr) || 0,
                                aov: parseFloat(aov) || 0
                            };
                        }).filter(d => !isNaN(d.date.getTime()) && d.revenue > 0);

                        this.data.historical = data;
                        this.updateDataPreview();
                        this.showToast('數據上傳成功！');
                        
                    } catch (error) {
                        this.showToast('檔案格式錯誤');
                    }
                };
                reader.readAsText(file);
            }

            updateDataPreview() {
                const data = this.data.historical;
                if (data.length === 0) return;

                const totalRevenue = data.reduce((sum, d) => sum + d.revenue, 0);
                const avgTraffic = data.reduce((sum, d) => sum + d.traffic, 0) / data.length;
                const avgCvr = data.reduce((sum, d) => sum + d.cvr, 0) / data.length;
                const avgAov = data.reduce((sum, d) => sum + d.aov, 0) / data.length;

                document.getElementById('total-revenue').textContent = `$${totalRevenue.toLocaleString()}`;
                document.getElementById('avg-traffic').textContent = Math.round(avgTraffic).toLocaleString();
                document.getElementById('avg-cvr').textContent = `${avgCvr.toFixed(1)}%`;
                document.getElementById('avg-aov').textContent = `$${Math.round(avgAov).toLocaleString()}`;

                document.getElementById('data-preview').classList.remove('hidden');
            }

            calculateTargets() {
                const strategy = document.getElementById('growth-strategy').value;
                const historical = this.data.historical;
                
                if (historical.length === 0) return;

                const avgRevenue = historical.reduce((sum, d) => sum + d.revenue, 0) / historical.length;
                const avgCvr = historical.reduce((sum, d) => sum + d.cvr, 0) / historical.length;
                const avgAov = historical.reduce((sum, d) => sum + d.aov, 0) / historical.length;

                let growthRate = 0.3;
                if (strategy === 'conservative') growthRate = 0.15;
                if (strategy === 'aggressive') growthRate = 0.5;

                const targetRevenue = Math.round(avgRevenue * (1 + growthRate));
                const targetTraffic = Math.ceil(targetRevenue / ((avgCvr / 100) * avgAov));

                document.getElementById('target-revenue').value = targetRevenue;
                document.getElementById('target-traffic').value = targetTraffic;
                document.getElementById('target-cvr').value = avgCvr.toFixed(1);
                document.getElementById('target-aov').value = Math.round(avgAov);

                this.data.targets = { revenue: targetRevenue, traffic: targetTraffic, cvr: avgCvr, aov: avgAov };
            }

            calculateGaps() {
                const historical = this.data.historical;
                const targets = this.data.targets;
                
                if (historical.length === 0 || !targets.revenue) return;

                const currentTraffic = historical.reduce((sum, d) => sum + d.traffic, 0) / historical.length;
                const currentCvr = historical.reduce((sum, d) => sum + d.cvr, 0) / historical.length;
                const currentAov = historical.reduce((sum, d) => sum + d.aov, 0) / historical.length;

                const gaps = {
                    traffic: Math.max(0, targets.traffic - currentTraffic),
                    cvr: Math.max(0, targets.cvr - currentCvr),
                    aov: Math.max(0, targets.aov - currentAov)
                };

                this.data.gaps = gaps;

                document.getElementById('traffic-gap').textContent = `+${Math.round(gaps.traffic).toLocaleString()}`;
                document.getElementById('cvr-gap').textContent = `+${gaps.cvr.toFixed(1)}%`;
                document.getElementById('aov-gap').textContent = `+$${Math.round(gaps.aov).toLocaleString()}`;

                const currentRevenue = currentTraffic * (currentCvr / 100) * currentAov;
                const progress = Math.min((currentRevenue / targets.revenue) * 100, 100);
                
                document.getElementById('progress-percent').textContent = `${Math.round(progress)}%`;
                const circle = document.getElementById('progress-circle');
                const offset = 314 - (314 * progress / 100);
                circle.style.strokeDashoffset = offset;
            }

            generateCampaigns() {
                const campaigns = [
                    { name: 'Google Ads 投放', type: 'traffic', desc: '精準關鍵字廣告投放', impact: '流量提升 40-60%' },
                    { name: 'KOL 合作推廣', type: 'traffic', desc: '網紅開箱合作推廣', impact: '流量提升 30-50%' },
                    { name: '新客首購優惠', type: 'conversion', desc: '首次購買 85 折優惠', impact: '轉換率提升 20-35%' },
                    { name: '限時免運活動', type: 'conversion', desc: '全站免運費促銷', impact: '轉換率提升 15-25%' },
                    { name: '滿額贈品活動', type: 'aov', desc: '消費滿額贈送禮品', impact: '客單價提升 25-40%' },
                    { name: '組合商品優惠', type: 'aov', desc: '超值組合包優惠', impact: '客單價提升 30-50%' }
                ];

                const container = document.getElementById('campaigns-container');
                container.innerHTML = campaigns.map(campaign => `
                    <div class="campaign-card" onclick="this.classList.toggle('selected')">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <h3 style="font-weight: 600; color: var(--gray-800); margin: 0;">${campaign.name}</h3>
                            <span class="badge badge-${campaign.type === 'traffic' ? 'traffic' : campaign.type === 'conversion' ? 'conversion' : 'aov'}">
                                ${campaign.type === 'traffic' ? '流量型' : campaign.type === 'conversion' ? '轉換型' : '客單價型'}
                            </span>
                        </div>
                        <p style="color: var(--gray-500); font-size: 0.875rem; margin-bottom: 1rem;">${campaign.desc}</p>
                        <div style="font-size: 0.75rem; color: var(--gray-600);">
                            <strong>預期效果：</strong>${campaign.impact}
                        </div>
                    </div>
                `).join('');
            }

            nextStep() {
                if (this.currentStep === 1 && !document.getElementById('brand-name').value) {
                    this.showToast('請輸入品牌名稱');
                    return;
                }
                
                if (this.currentStep === 2) {
                    this.calculateTargets();
                }
                
                if (this.currentStep === 3) {
                    this.calculateGaps();
                }

                this.updateStep(this.currentStep + 1);
            }

            prevStep() {
                this.updateStep(this.currentStep - 1);
            }

            updateStep(step) {
                document.getElementById(`step-${this.currentStep}`).classList.remove('active');
                document.querySelector(`[data-step="${this.currentStep}"]`).classList.remove('active');
                document.querySelector(`[data-step="${this.currentStep}"]`).classList.add('completed');

                this.currentStep = step;

                document.getElementById(`step-${this.currentStep}`).classList.add('active');
                document.querySelector(`[data-step="${this.currentStep}"]`).classList.add('active');
                document.querySelector(`[data-step="${this.currentStep}"]`).classList.remove('inactive');
            }

            exportPlan() {
                const selectedCampaigns = Array.from(document.querySelectorAll('.campaign-card.selected'))
                    .map(card => card.querySelector('h3').textContent);

                const plan = {
                    brand: document.getElementById('brand-name').value,
                    category: document.getElementById('category').value,
                    targetMonth: document.getElementById('target-month').value,
                    targets: this.data.targets,
                    gaps: this.data.gaps,
                    selectedCampaigns: selectedCampaigns,
                    exportDate: new Date().toISOString()
                };

                const blob = new Blob([JSON.stringify(plan, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${plan.brand}-growth-plan.json`;
                a.click();
                URL.revokeObjectURL(url);

                this.showToast('計畫已匯出！');
            }

            showToast(message) {
                document.getElementById('toast-message').textContent = message;
                document.getElementById('toast').classList.add('show');
                setTimeout(() => document.getElementById('toast').classList.remove('show'), 3000);
            }
        }

        document.addEventListener('DOMContentLoaded', () => new EcommercePlanner());
    </script>
</body>
</html>